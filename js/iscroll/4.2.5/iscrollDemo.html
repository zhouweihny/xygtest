<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<title></title>
<link rel="stylesheet" href="pullToRefresh.css" />

<script type="text/javascript" src="iscroll.js"></script>
<script type="text/javascript" src="pullToRefresh.js"></script>

<style type="text/css" media="all">
body, html {
    padding: 0;
    margin: 0;
    height: 100%;
    font-family: Arial, Microsoft YaHei;
    color: #111;
}
li {
    /*border-bottom: 1px #CCC solid;*/
    text-align: center;
    line-height: 80px;
}
</style>

</head>
<body class="zui">

<div id="wrapper">
    <ul>
        <li>row 10</li>
        <li>row 9</li>
        <li>row 8</li>
        <li>row 7</li>
        <li>row 6</li>
        <li>row 5</li>
        <li>row 4</li>
        <li>row 3</li>
        <li>row 2</li>
        <li>row 1</li>
    </ul>
</div>

<script>

refresher.init({
    id: "wrapper",
    pullDownAction: Refresh,
    pullUpAction: Load
});
var generatedCount = 0;
function Refresh() {
    setTimeout(function () {
        var el, li, i;
        el = document.querySelector("#wrapper ul");
        el.innerHTML = '';
        for (i = 0; i < 11; i++) {
            li = document.createElement('li');
            li.appendChild(document.createTextNode('async row ' + (++generatedCount)));
            el.insertBefore(li, el.childNodes[0]);
        }
        wrapper.refresh();
    }, 1000);
}

function Load() {
    setTimeout(function () {
        var el, li, i;
        el = document.querySelector("#wrapper ul");
        for (i = 0; i < 2; i++) {
            li = document.createElement('li');
            li.appendChild(document.createTextNode('async row ' + (++generatedCount)));
            el.appendChild(li, el.childNodes[0]);
        }
        wrapper.refresh();
    }, 1000);
}

</script>
</body>
</html>